{"version":3,"sources":["./src/app/pages/auth/auth.page.html","./src/app/pages/auth/auth.module.ts","./src/app/pages/auth/auth.page.scss","./src/app/pages/auth/auth.page.ts"],"names":[],"mappings":"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","file":"pages-auth-auth-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>{{ isLogin? 'Login' : 'Sign Up'}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <form #f=\\\"ngForm\\\" (ngSubmit)=\\\"onSubmit(f)\\\">\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <h1 class=\\\"ion-text-center\\\">PropNex Investment Suite</h1>\\n        </ion-col>\\n\\n      </ion-row>\\n      <ion-row>\\n        <ion-col>\\n          <ion-list>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Email</ion-label>\\n              <ion-input \\n                type=\\\"text\\\" \\n                ngModel \\n                name=\\\"email\\\"\\n                required \\n                #emailCtrl=\\\"ngModel\\\"\\n              ></ion-input>\\n            </ion-item>\\n\\n            <ion-item \\n              *ngIf=\\\"!emailCtrl.valid && emailCtrl.touched\\\"\\n              lines=\\\"none\\\"\\n            >\\n              <ion-label>\\n                Invalid email.\\n              </ion-label>\\n            </ion-item>\\n        \\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Password</ion-label>\\n              <ion-input \\n                type=\\\"password\\\"\\n                ngModel\\n                name=\\\"password\\\"\\n                required\\n                minlength=\\\"6\\\"\\n                #passwordCtrl=\\\"ngModel\\\"\\n              ></ion-input>\\n            </ion-item>\\n\\n            <ion-item \\n              *ngIf=\\\"!passwordCtrl.valid && passwordCtrl.touched\\\"\\n              lines=\\\"none\\\"\\n            >\\n              <ion-label>\\n                Invalid password.\\n              </ion-label>\\n            </ion-item>\\n          </ion-list>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row *ngIf=\\\"!isLogin\\\">\\n        <ion-col>\\n          <ion-list>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Name</ion-label>\\n              <ion-input \\n                type=\\\"text\\\" \\n                ngModel \\n                name=\\\"name\\\"\\n                required \\n                #nameCtrl=\\\"ngModel\\\"\\n              ></ion-input>\\n            </ion-item>\\n\\n            <ion-item \\n              *ngIf=\\\"!nameCtrl.valid && nameCtrl.touched\\\"\\n              lines=\\\"none\\\"\\n            >\\n              <ion-label>\\n                Invalid name.\\n              </ion-label>\\n            </ion-item>\\n      \\n          </ion-list>\\n        </ion-col>\\n      </ion-row>\\n  \\n      <ion-row>\\n        <ion-col>\\n          <ion-button \\n            type=\\\"button\\\" \\n            color=\\\"tertiary\\\" \\n            fill=\\\"clear\\\" \\n            expand=\\\"block\\\"\\n            (click)=\\\"onSwitchAuthMode()\\\"\\n            >{{ isLogin ? \\n              'Don\\\\'t have an account? Sign Up' : \\n              'Already have an account? Login'}}\\n          </ion-button>\\n  \\n          <ion-button \\n            type=\\\"submit\\\"  \\n            expand=\\\"block\\\"\\n            [disabled]=\\\"!f.valid\\\"\\n            >{{ isLogin ? \\n              'Login' : \\n              'Sign Up'}}\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n\\n  <!-- <ion-button (click)=\\\"fetchFBUsers()\\\">\\n    Fetch FB Users\\n  </ion-button>\\n\\n  <ion-button (click)=\\\"fetchFBPostals()\\\">\\n    Fetch FB Postals\\n  </ion-button>\\n\\n  <ion-button (click)=\\\"fetchFBTrans()\\\">\\n    Fetch FB Trans\\n  </ion-button> -->\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AuthPage } from './auth.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AuthPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [AuthPage]\n})\nexport class AuthPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2F1dGgvYXV0aC5wYWdlLnNjc3MifQ== */\";","import { HttpClient } from '@angular/common/http';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { AuthService } from '../../services/auth.service';\nimport { fbUser, fbPostal, fbTrans } from './firebase.model';\n\n@Component({\n  selector: 'app-auth',\n  templateUrl: './auth.page.html',\n  styleUrls: ['./auth.page.scss'],\n})\nexport class AuthPage implements OnInit, OnDestroy {\n  isLoading = false;\n  isLogin = true;\n\n  result: fbUser;\n\n  loadedFBUsers: fbUser[];\n  private fbUsersSub: Subscription;\n\n  // loadedFBPostals: fbPostal[];\n  // private fbPostalsSub: Subscription;\n\n  // loadedFBTrans: fbTrans[];\n  // private fbPTransSub: Subscription;\n\n\n  constructor(\n    private authService: AuthService, \n    private router: Router,\n    private loadingCtrl: LoadingController,\n    private alertController: AlertController\n    //private http: HttpClient\n  ) { }\n\n  ngOnInit() {\n    this.fbUsersSub = this.authService.fbUsers.subscribe(fbUsers => {\n      this.loadedFBUsers = fbUsers;\n    })\n\n    // this.fbPostalsSub = this.authService.fbPostals.subscribe(fbPostals => {\n    //   this.loadedFBPostals = fbPostals;\n    // })\n\n    // this.fbPTransSub = this.authService.fbTrans.subscribe(fbTrans => {\n    //   this.loadedFBTrans = fbTrans;\n    // })\n  }\n\n  ionViewWillEnter() {\n    this.authService.fetchFBUsers().subscribe(() => {\n\n    });\n\n    // this.authService.fetchFBPostals().subscribe(() => {\n\n    // });\n\n    // this.authService.fetchFBTrans().subscribe(() => {\n\n    // });\n\n  }\n\n  onSubmit(form: NgForm) {\n    if (!form.valid) {\n      return;\n    }\n    const email = form.value.email;\n    const password = form.value.password;\n    const name = form.value.name;\n\n    form.reset();\n    console.log(email, password);\n    console.log(name);\n\n    if (this.isLogin) {\n      // send request to login servers\n      this.result = this.loadedFBUsers.find(u => u.email === email);\n      if (this.result) {\n        \n        if (this.result.password === password) {\n          \n          this.authService.currFbUser = this.result;\n          console.log(this.authService.currFbUser);\n          this.authService.login();\n          this.router.navigateByUrl('/home/tabs/main');\n        } else {\n          // invalid password\n          this.presentPasswordAlert();\n          \n        }\n      } else {\n        // invalid email\n        this.presentEmailAlert();\n        \n      }\n    } else {\n      // send request to signup servers\n      this.authService.addUser(email, name, password).subscribe(() => {\n\n      });\n      this.isLogin = true;\n      this.router.navigateByUrl('/auth');\n    }\n  }\n\n  async presentEmailAlert() {\n    const alert = await this.alertController.create({\n      header: 'Authentication Failed',\n      message: 'Incorrect email!',\n      buttons: ['OK'],\n    });\n\n    await alert.present();\n  }\n\n  async presentPasswordAlert() {\n    const alert = await this.alertController.create({\n      header: 'Authentication Failed',\n      message: 'Incorrect password!',\n      buttons: ['OK'],\n    });\n\n    await alert.present();\n  }\n\n  onSwitchAuthMode() {\n    this.isLogin = !this.isLogin;\n  }\n\n  fetchFBUsers() {\n    console.log(this.loadedFBUsers);\n    //console.log(this.loadedFBUsers[0].email);\n  }\n\n  // fetchFBPostals() {\n  //   console.log(this.loadedFBPostals);\n  // }\n\n  // fetchFBTrans() {\n  //   console.log(this.loadedFBTrans);\n  // }\n\n  ngOnDestroy() {\n    if (this.fbUsersSub) {\n      this.fbUsersSub.unsubscribe();\n    }\n    // if (this.fbPostalsSub) {\n    //   this.fbPostalsSub.unsubscribe();\n    // }\n    // if (this.fbPTransSub) {\n    //   this.fbPTransSub.unsubscribe();\n    // }\n  }\n}\n"],"sourceRoot":"webpack:///"}